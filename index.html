<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-06-14 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170614" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Providence &#x2013; Providence</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
                      <a href="https://github.com/morimekta/providence">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Providence</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2017-06-14<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.4.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
          <li class="nav-header">Introduction</li>
    <li class="active"><a href="#"><span class="none"></span>Providence</a>
  </li>
    <li><a href="models.html" title="Providence Models"><span class="none"></span>Providence Models</a>  </li>
    <li><a href="services.html" title="Providence Services"><span class="none"></span>Providence Services</a>  </li>
    <li><a href="apache-thrift.html" title="Comparing with Thrift"><span class="none"></span>Comparing with Thrift</a>  </li>
    <li><a href="https://github.com/morimekta/providence/releases" class="externalLink" title="Downloads & Releases"><span class="none"></span>Downloads & Releases</a>  </li>
          <li class="nav-header">Modules</li>
    <li><a href="providence-core/index.html" title="Core"><span class="none"></span>Core</a>  </li>
    <li><a href="providence-core-client/index.html" title="Core : Client"><span class="none"></span>Core : Client</a>  </li>
    <li><a href="providence-core-server/index.html" title="Core : Server"><span class="none"></span>Core : Server</a>  </li>
    <li><a href="providence-reflect/index.html" title="Utils : Reflect"><span class="none"></span>Utils : Reflect</a>  </li>
    <li><a href="providence-thrift/index.html" title="Utils : Thrift Bridge"><span class="none"></span>Utils : Thrift Bridge</a>  </li>
    <li><a href="providence-testing/index.html" title="Utils : Testing"><span class="none"></span>Utils : Testing</a>  </li>
    <li><a href="providence-config/index.html" title="Utils : Config"><span class="none"></span>Utils : Config</a>  </li>
    <li><a href="providence-storage/index.html" title="Utils : Storage"><span class="none"></span>Utils : Storage</a>  </li>
    <li><a href="providence-jax-rs/index.html" title="Utils : Javax-Ws-Rs"><span class="none"></span>Utils : Javax-Ws-Rs</a>  </li>
    <li><a href="providence-generator/index.html" title="Tools : Generator"><span class="none"></span>Tools : Generator</a>  </li>
    <li><a href="providence-generator-java/index.html" title="Tools : Generator - Java"><span class="none"></span>Tools : Generator - Java</a>  </li>
    <li><a href="providence-generator-json/index.html" title="Tools : Generator - JSON"><span class="none"></span>Tools : Generator - JSON</a>  </li>
    <li><a href="providence-maven-plugin/index.html" title="Tools : Maven Plugin"><span class="none"></span>Tools : Maven Plugin</a>  </li>
    <li><a href="providence-gradle-plugin.html" title="Tools : Gradle Plugin"><span class="none"></span>Tools : Gradle Plugin</a>  </li>
          <li class="nav-header">CLI Tools</li>
    <li><a href="providence-tools-converter.html" title="CLI : Converter"><span class="none"></span>CLI : Converter</a>  </li>
    <li><a href="providence-tools-rpc.html" title="CLI : RPC Tool"><span class="none"></span>CLI : RPC Tool</a>  </li>
    <li><a href="providence-tools-config.html" title="CLI : Config Helper"><span class="none"></span>CLI : Config Helper</a>  </li>
    <li><a href="providence-tools-compiler.html" title="CLI : Compiler"><span class="none"></span>CLI : Compiler</a>  </li>
          <li class="nav-header">Generator Options</li>
    <li><a href="options.html" title="Options Overview"><span class="none"></span>Options Overview</a>  </li>
    <li><a href="options-hazelcast.html" title="Hazelcast Portable"><span class="none"></span>Hazelcast Portable</a>  </li>
    <li><a href="options-android.html" title="Android Parcelable"><span class="none"></span>Android Parcelable</a>  </li>
    <li><a href="options-jackson.html" title="Jackson Annotations"><span class="none"></span>Jackson Annotations</a>  </li>
          <li class="nav-header">Documentation</li>
    <li><a href="release.html" title="Release Process"><span class="none"></span>Release Process</a>  </li>
    <li><a href="integration-testing.html" title="Integration Testing"><span class="none"></span>Integration Testing</a>  </li>
    <li><a href="serializer-binary.html" title="Serializer : Binary"><span class="none"></span>Serializer : Binary</a>  </li>
    <li><a href="serializer-fast-binary.html" title="Serializer : Fast Binary"><span class="none"></span>Serializer : Fast Binary</a>  </li>
    <li><a href="serializer-json.html" title="Serializer : JSON"><span class="none"></span>Serializer : JSON</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Providence</h1>
<p>The <tt>providence</tt> project was made in order to make an immutable model java library for thrift. It is mostly separate from the thrift library, but can use the standard thrift protocols to serialize and serialize messages. It is mainly based on the Facebook / Apache <a class="externalLink" href="https://thrift.apache.org/">thrift</a> library, but with some differences and limitations.</p>
<p>Note that providence <b>requires</b> java &gt;= 8.</p>
<div class="section">
<h2><a name="Providence_Setup"></a>Providence Setup</h2>
<p>You do not need to install anything (but java) in order to start using <tt>providence</tt>. The project has builder plugins for <tt>maven</tt> and <tt>gradle</tt>, but if neither is used there is a binary code generator available <a class="externalLink" href="https://github.com/morimekta/providence/releases">here</a> (check for the version of providence that you want to use).</p>
<p>Note that you always need to add dependency to <tt>providence-core</tt> of the appropriate version for it to work.</p>
<div class="section">
<h3><a name="Maven"></a>Maven</h3>
<p>In maven the setup is simply to add a directory <tt>src/main/providence</tt> or <tt>src/test/providence</tt> there thrift files go, and add the <tt>providence-maven-plugin</tt> and the core library to the <tt>pom.xml</tt> file like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;project&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;net.morimekta.providence&lt;/groupId&gt;
            &lt;artifactId&gt;providence-core&lt;/artifactId&gt;
            &lt;version&gt;${providence.version}&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;net.morimekta.providence&lt;/groupId&gt;
                &lt;artifactId&gt;providence-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${providence.version}&lt;/version&gt;
                &lt;extensions&gt;true&lt;/extensions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</pre></div></div>
<p>And the providence generated files can be regenerated by:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn generate-sources
# or
mvn generage-test-sources
</pre></div></div>
<p>Now the generated providence files should be available in your project.</p></div>
<div class="section">
<h3><a name="Gradle"></a>Gradle</h3>
<p>When using <tt>gradle</tt> as build engine, you can use the <tt>providence-gradle-plugin</tt>, which can be added with the lines. The thrift files goes to the same location as with maven: <tt>src/main/providence</tt> or <tt>src/test/providence</tt>.</p>

<div class="source">
<div class="source"><pre class="prettyprint">var providence_version = '{providence version}'

plugins {
    id &quot;net.morimekta.providence.gradle&quot; version &quot;${providence_version}&quot; apply false
}

apply plugin: 'java'
apply plugin: 'net.morimekta.providence.gradle'

dependencies {
    compile &quot;net.morimekta.providence:providence-core:${providence_version}&quot;
}
</pre></div></div>
<p>And the providence generated files can be regenerated by:</p>

<div class="source">
<div class="source"><pre class="prettyprint">./gradlew generateProvidence
# or
./gradlew generateTestProvidence
</pre></div></div></div>
<div class="section">
<h3><a name="Using_with_IDL_tool"></a>Using with IDL tool</h3>
<p>When using the <a class="externalLink" href="https://github.com/uber-node/idl">&#xdc;ber IDL Tool</a>, you need to override how the providence plugin refers to the directory containing the thrift files.</p>
<p>In maven it is specified with the <tt>includes</tt> parameter in the execution config.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;plugin&gt;
    &lt;groupId&gt;net.morimekta.providence&lt;/groupId&gt;
    &lt;artifactId&gt;providence-maven-plugin&lt;/artifactId&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;generate-providence&lt;/id&gt;
            &lt;phase&gt;generate-sources&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;compile&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;inputFiles&gt;
                    &lt;includes&gt;
                        &lt;include&gt;idl/**/*.thrift&lt;/include&gt;
                    &lt;/includes&gt;
                &lt;/inputFiles&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</pre></div></div>
<p>In gradle it is done via the <tt>providence</tt> setup block:</p>

<div class="source">
<div class="source"><pre class="prettyprint">providence {
    main {
        input = fileTree('idl') {
            include '**/*.thrift'
        }
    }
}
</pre></div></div></div></div>
<div class="section">
<h2><a name="Developer_Setup"></a>Developer Setup</h2>
<p>In order to compile providence itself, you need the java 8 <tt>java</tt> and <tt>javac</tt> commands (I recommend <tt>openjdk8-jdk</tt>), and <tt>maven</tt> (3.3). Then check out <tt>git@github.com:morimekta/providence.git</tt> and build with:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn clean verify install
</pre></div></div>
<p>There are also a <tt>Makefile</tt> for updating pre-compiled providence files, and a <tt>thrift.gradle</tt> file that helps with updating pre-compiled thrift files. These needs <tt>make</tt> and <tt>gradle</tt> installed to work (no gradle wrapper here).</p></div>
<div class="section">
<h2><a name="Terms_and_Definitions"></a>Terms and Definitions</h2>
<p>Throughout the providence documentation I use a number of terms that easily can be confused.</p>

<ul>
  
<li><b>[thrift]</b>: A system of converting files that follow the <tt>thirft</tt> IDL  specification found <a class="externalLink" href="https://thrift.apache.org/docs/idl">here</a> to some form of  code or data. I currently know of 5 <tt>thrift</tt> systems, other than <tt>providence</tt>:
  
<ul>
    
<li><a class="externalLink" href="https://thrift.apache.org">Apache Thrift</a>: The &#x201c;main&#x201d; thrift implementation  containing lots of languages.</li>
    
<li><a class="externalLink" href="https://github.com/facebook/fbthrift">FB Thrift</a>: A FaceBook managed fork  of thrift with changes and features that FaceBook wants.</li>
    
<li><a class="externalLink" href="https://github.com/markrileybot/thrift-nano">Thrift-Nano</a>: A version of thrift  optimized for low memory consumption e.g. for using on low-power embedded systems.</li>
    
<li><a class="externalLink" href="https://github.com/Microsoft/thrifty">Thrifty</a>: A compact and simple java version  of thrift aimed at mobile platforms.</li>
    
<li><a class="externalLink" href="https://thriftpy.readthedocs.io/en/latest/">ThriftPy</a>: An alternative python  library and compiler for thrift.</li>
  </ul></li>
  
<li><b>[Apache Thrift]</b>: Is the &#x201c;official&#x201d; Apache hosted implementation of thrift.  This is essentially what is compared with for determining compatibility.</li>
  
<li><b>[Providence]</b>: Is all of this project (including some off-repository parts  like <a class="externalLink" href="https://www.github.com/morimekta/providence-gradle-plugin">providence-gradle-plugin</a>).</li>
</ul>
<p>Also inside providence, we use a little different set of definitions from Apache Thrift.</p>

<ul>
  
<li><b>[message]</b>: Message is the base type of all the structured data typed  defined in a thrift file, including <tt>struct</tt>, <tt>exception</tt> and <tt>union</tt>.  This is variantly called <tt>struct</tt> and <tt>base type</tt> in Apache Thrift.</li>
  
<li><b>[service call]</b>: Is the wrapper structure that is sent with the  call to and response from a service method call.  This is what is called a <tt>message</tt> in Apache Thrift.</li>
</ul></div>
<div class="section">
<h2><a name="Contributing"></a>Contributing</h2>
<p>You can send me an <a class="externalLink" href="mailto:oss@morimekta.net">email</a> to suggest a feature. Or you can make it yourself by cloning <a class="externalLink" href="https://github.com/morimekta/providence">the project</a>, and create a <a class="externalLink" href="https://github.com/morimekta/providence/pulls">pull request</a> for your change.</p>
<p>Make sure to name it properly, and describe what the change does, and assign the request to <a class="externalLink" href="https://github.com/morimekta">@morimekta</a>. That should send me an email, so I know it&#x2019;s there and take care of it.</p></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-3087264-4', 'auto');
                ga('send', 'pageview');
            </script>
        </div>
        </div>
    </footer>
    </body>
</html>
