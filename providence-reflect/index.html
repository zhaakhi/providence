<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-09-01 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170901" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Providence &#x2013; Providence Utils : Reflect</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/morimekta/providence">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Providence Utils : Reflection</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2017-09-01
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.5.3
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Project Documentation</li>
                                                                                                                    
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                      
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
                              <li class="nav-header">Introduction</li>
                              
      <li>
  
                          <a href="../index.html" title="Providence">
          <span class="none"></span>
        Providence</a>
            </li>
                
      <li>
  
                          <a href="../models.html" title="Providence Models">
          <span class="none"></span>
        Providence Models</a>
            </li>
                
      <li>
  
                          <a href="../services.html" title="Providence Services">
          <span class="none"></span>
        Providence Services</a>
            </li>
                
      <li>
  
                          <a href="../apache-thrift.html" title="Comparing with Thrift">
          <span class="none"></span>
        Comparing with Thrift</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/morimekta/providence/releases" class="externalLink" title="Downloads & Releases">
          <span class="none"></span>
        Downloads & Releases</a>
            </li>
                              <li class="nav-header">Modules</li>
                              
      <li>
  
                          <a href="../providence-core/index.html" title="Core">
          <span class="none"></span>
        Core</a>
            </li>
                
      <li>
  
                          <a href="../providence-core-client/index.html" title="Core : Client">
          <span class="none"></span>
        Core : Client</a>
            </li>
                
      <li>
  
                          <a href="../providence-core-server/index.html" title="Core : Server">
          <span class="none"></span>
        Core : Server</a>
            </li>
                
      <li>
  
                          <a href="../providence-reflect/index.html" title="Utils : Reflect">
          <span class="none"></span>
        Utils : Reflect</a>
            </li>
                
      <li>
  
                          <a href="../providence-thrift/index.html" title="Utils : Thrift Bridge">
          <span class="none"></span>
        Utils : Thrift Bridge</a>
            </li>
                
      <li>
  
                          <a href="../providence-testing/index.html" title="Utils : Testing">
          <span class="none"></span>
        Utils : Testing</a>
            </li>
                
      <li>
  
                          <a href="../providence-config/index.html" title="Utils : Config">
          <span class="none"></span>
        Utils : Config</a>
            </li>
                
      <li>
  
                          <a href="../providence-storage/index.html" title="Utils : Storage">
          <span class="none"></span>
        Utils : Storage</a>
            </li>
                
      <li>
  
                          <a href="../providence-storage-hazelcast/index.html" title="Utils : Storage - Hazelcast">
          <span class="none"></span>
        Utils : Storage - Hazelcast</a>
            </li>
                
      <li>
  
                          <a href="../providence-jax-rs/index.html" title="Utils : Javax-Ws-Rs">
          <span class="none"></span>
        Utils : Javax-Ws-Rs</a>
            </li>
                
      <li>
  
                          <a href="../providence-generator/index.html" title="Tools : Generator">
          <span class="none"></span>
        Tools : Generator</a>
            </li>
                
      <li>
  
                          <a href="../providence-generator-java/index.html" title="Tools : Generator - Java">
          <span class="none"></span>
        Tools : Generator - Java</a>
            </li>
                
      <li>
  
                          <a href="../providence-generator-json/index.html" title="Tools : Generator - JSON">
          <span class="none"></span>
        Tools : Generator - JSON</a>
            </li>
                
      <li>
  
                          <a href="../providence-maven-plugin/index.html" title="Tools : Maven Plugin">
          <span class="none"></span>
        Tools : Maven Plugin</a>
            </li>
                
      <li>
  
                          <a href="../providence-gradle-plugin.html" title="Tools : Gradle Plugin">
          <span class="none"></span>
        Tools : Gradle Plugin</a>
            </li>
                              <li class="nav-header">CLI Tools</li>
                              
      <li>
  
                          <a href="../providence-tools-converter.html" title="CLI : Converter">
          <span class="none"></span>
        CLI : Converter</a>
            </li>
                
      <li>
  
                          <a href="../providence-tools-rpc.html" title="CLI : RPC Tool">
          <span class="none"></span>
        CLI : RPC Tool</a>
            </li>
                
      <li>
  
                          <a href="../providence-tools-config.html" title="CLI : Config Helper">
          <span class="none"></span>
        CLI : Config Helper</a>
            </li>
                
      <li>
  
                          <a href="../providence-tools-compiler.html" title="CLI : Compiler">
          <span class="none"></span>
        CLI : Compiler</a>
            </li>
                              <li class="nav-header">Generator Options</li>
                              
      <li>
  
                          <a href="../options.html" title="Options Overview">
          <span class="none"></span>
        Options Overview</a>
            </li>
                
      <li>
  
                          <a href="../options-hazelcast.html" title="Hazelcast Portable">
          <span class="none"></span>
        Hazelcast Portable</a>
            </li>
                
      <li>
  
                          <a href="../options-android.html" title="Android Parcelable">
          <span class="none"></span>
        Android Parcelable</a>
            </li>
                
      <li>
  
                          <a href="../options-jackson.html" title="Jackson Annotations">
          <span class="none"></span>
        Jackson Annotations</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../release.html" title="Release Process">
          <span class="none"></span>
        Release Process</a>
            </li>
                
      <li>
  
                          <a href="../integration-testing.html" title="Integration Testing">
          <span class="none"></span>
        Integration Testing</a>
            </li>
                
      <li>
  
                          <a href="../serializer-binary.html" title="Serializer : Binary">
          <span class="none"></span>
        Serializer : Binary</a>
            </li>
                
      <li>
  
                          <a href="../serializer-fast-binary.html" title="Serializer : Fast Binary">
          <span class="none"></span>
        Serializer : Fast Binary</a>
            </li>
                
      <li>
  
                          <a href="../serializer-json.html" title="Serializer : JSON">
          <span class="none"></span>
        Serializer : JSON</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Providence Utils : Reflect</h1>
<p>The <tt>providence-reflect</tt> library&#x2019;s purpose is to be able to reflect thrift descriptors without having to invoke generated code. It has purposes like conversion for debugging tools, and parsing and generating struct descriptors in order to generate providence code (see <tt>providence-generator</tt>).</p>
<div class="section">
<div class="section">
<div class="section">
<h4><a name="The_Thrift_IDL"></a>The Thrift IDL</h4>
<p>And here is the Thrift IDL defined in thrift. It will in theory allow data about somethings than the original IDL, like field key for constants. But since it is defined in thrift, it can be transported and expressed in serialized thrift again.</p>

<div class="source">
<div class="source"><pre class="prettyprint">/**
 * Reflective thrift IDL description.
 *
 * Comments are gathered before the start of the next statement.
 *
 * - Line comments are accumulated with newline delimiter.
 *   Each line is individually trimmed.
 * - Block comments replace the entire comment.
 *   The first space after '*' on each line is ignored.
 */
namespace java net.morimekta.providence.model

/**
 * Struct variant for StructType. The lower-case of the enum value is the
 * thrift keyword.
 *
 * struct: No 'required' fields must be present (set to non-null value).
 * UNION: No required fields. Only one field set to be valid.
 * EXCEPTION: No 'cause' field, 'message' field *must* be a string (java).
 */
enum StructVariant {
    STRUCT = 1,
    UNION,
    EXCEPTION,
}

/**
 * &lt;name&gt; (= &lt;value&gt;)
 */
struct EnumValue {
    1: string comment;
    2: required string name;
    3: i32 value;
    4: map&lt;string,string&gt; annotations;
}

/**
 * enum {
 *   (&lt;value&gt; ([;,])?)*
 * }
 */
struct EnumType {
    1: string comment;
    2: required string name;
    3: list&lt;EnumValue&gt; values;
    4: map&lt;string,string&gt; annotations;
}

/**
 * typedef &lt;type&gt; &lt;name&gt;
 */
struct TypedefType {
    1: string comment;
    2: string type;
    3: string name;
}

/**
 * The requirement of the field.
 */
enum Requirement {
    DEFAULT = 0,
    OPTIONAL = 1,
    REQUIRED = 2,
}

/**
 * For fields:
 *   (&lt;key&gt;:)? (required|optional)? &lt;type&gt; &lt;name&gt; (= &lt;default_value&gt;)?
 * For const:
 *   const &lt;type&gt; &lt;name&gt; = &lt;default_value&gt;
 *
 * Fields without key is assigned values ranging from 65335 and down (2^16-1)
 * in order of appearance. Because of the &quot;in order of appearance&quot; the field
 * *must* be filled by the IDL parser.
 *
 * Consts are always given the key '0'.
 */
struct ThriftField {
    1: string comment;
    2: required i32 key;
    3: Requirement requirement = DEFAULT;
    4: required string type;
    5: required string name;
    6: string default_value;
    7: map&lt;string,string&gt; annotations;
}

/**
 * &lt;variant&gt; {
 *   (&lt;field&gt; ([,;])?)*
 * }
 */
struct StructType {
    1: string comment;
    2: StructVariant variant = StructVariant.STRUCT;
    3: required string name;
    4: list&lt;ThriftField&gt; fields;
    5: map&lt;string,string&gt; annotations;
}

/**
 * (oneway)? &lt;return_type&gt; &lt;name&gt;'('&lt;param&gt;*')' (throws '(' &lt;exception&gt;+ ')')?
 */
struct ServiceMethod {
    1: string comment;
    2: bool one_way = false;
    3: string return_type
    4: required string name;
    5: list&lt;ThriftField&gt; params;
    6: list&lt;ThriftField&gt; exceptions;
    7: map&lt;string,string&gt; annotations;
}

/**
 * service (extends &lt;extend&gt;)? {
 *   (&lt;method&gt; [;,]?)*
 * }
 */
struct ServiceType {
    1: string comment;
    2: required string name;
    3: string extend;
    4: list&lt;ServiceMethod&gt; methods;
    5: map&lt;string,string&gt; annotations;
}

/**
 * ( &lt;enum&gt; | &lt;typedef&gt; | &lt;struct&gt; | &lt;service&gt; | &lt;const&gt; )
 */
union Declaration {
    1: EnumType decl_enum;
    2: TypedefType decl_typedef;
    3: StructType decl_struct;
    4: ServiceType decl_service;
    5: ThriftField decl_const;
}

/**
 * &lt;namespace&gt;* &lt;include&gt;* &lt;declataion&gt;*
 */
struct ThriftDocument {
    // Must come before the first statement of the header.
    1: string comment;
    // Deducted from filename in .thrift IDL files.
    2: required string package;
    // include &quot;&lt;package&gt;.thrift&quot;
    3: list&lt;string&gt; includes;
    // namespace &lt;key&gt; &lt;value&gt;
    4: map&lt;string,string&gt; namespaces;
    5: list&lt;Declaration&gt; decl;
}
</pre></div></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                          <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-3087264-4', 'auto');
                ga('send', 'pageview');
            </script>
                </div>

        
                </div>
    </footer>
        </body>
</html>
