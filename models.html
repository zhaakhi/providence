<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-01-02 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180102" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Providence &#x2013; Providence Models</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
                      <a href="https://github.com/morimekta/providence">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Providence</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2018-01-02<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
          <li class="nav-header">Introduction</li>
    <li><a href="index.html" title="Providence"><span class="none"></span>Providence</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>Providence Models</a>
  </li>
    <li><a href="services.html" title="Providence Services"><span class="none"></span>Providence Services</a>  </li>
    <li><a href="apache-thrift.html" title="Comparing with Thrift"><span class="none"></span>Comparing with Thrift</a>  </li>
    <li><a href="https://github.com/morimekta/providence/releases" class="externalLink" title="Downloads & Releases"><span class="none"></span>Downloads & Releases</a>  </li>
          <li class="nav-header">Modules</li>
    <li><a href="providence-core/index.html" title="Core"><span class="none"></span>Core</a>  </li>
    <li><a href="providence-core-client/index.html" title="Core : Client"><span class="none"></span>Core : Client</a>  </li>
    <li><a href="providence-core-server/index.html" title="Core : Server"><span class="none"></span>Core : Server</a>  </li>
    <li><a href="providence-core-jackson/index.html" title="Core : Jackson"><span class="none"></span>Core : Jackson</a>  </li>
    <li><a href="providence-reflect/index.html" title="Utils : Reflect"><span class="none"></span>Utils : Reflect</a>  </li>
    <li><a href="providence-testing/index.html" title="Utils : Testing"><span class="none"></span>Utils : Testing</a>  </li>
    <li><a href="providence-thrift/index.html" title="Utils : Thrift Bridge"><span class="none"></span>Utils : Thrift Bridge</a>  </li>
    <li><a href="providence-storage/index.html" title="Utils : Storage"><span class="none"></span>Utils : Storage</a>  </li>
    <li><a href="providence-config/index.html" title="Utils : Config (beta)"><span class="none"></span>Utils : Config (beta)</a>  </li>
    <li><a href="providence-storage-hazelcast/index.html" title="Utils : Storage - Hazelcast (beta)"><span class="none"></span>Utils : Storage - Hazelcast (beta)</a>  </li>
    <li><a href="providence-jax-rs/index.html" title="Utils : Javax-Ws-Rs (beta)"><span class="none"></span>Utils : Javax-Ws-Rs (beta)</a>  </li>
    <li><a href="providence-generator/index.html" title="Tools : Generator"><span class="none"></span>Tools : Generator</a>  </li>
    <li><a href="providence-generator-java/index.html" title="Tools : Generator - Java"><span class="none"></span>Tools : Generator - Java</a>  </li>
    <li><a href="providence-maven-plugin/index.html" title="Tools : Maven Plugin"><span class="none"></span>Tools : Maven Plugin</a>  </li>
    <li><a href="providence-gradle-plugin.html" title="Tools : Gradle Plugin"><span class="none"></span>Tools : Gradle Plugin</a>  </li>
          <li class="nav-header">CLI Tools</li>
    <li><a href="providence-tools-converter.html" title="CLI : Converter"><span class="none"></span>CLI : Converter</a>  </li>
    <li><a href="providence-tools-rpc.html" title="CLI : RPC Tool"><span class="none"></span>CLI : RPC Tool</a>  </li>
    <li><a href="providence-tools-config.html" title="CLI : Config Helper"><span class="none"></span>CLI : Config Helper</a>  </li>
    <li><a href="providence-tools-generator.html" title="CLI : Generator"><span class="none"></span>CLI : Generator</a>  </li>
          <li class="nav-header">Documentation</li>
    <li><a href="release.html" title="Release Process"><span class="none"></span>Release Process</a>  </li>
    <li><a href="integration-testing.html" title="Integration Testing"><span class="none"></span>Integration Testing</a>  </li>
    <li><a href="serializer-binary.html" title="Serializer : Binary"><span class="none"></span>Serializer : Binary</a>  </li>
    <li><a href="serializer-fast-binary.html" title="Serializer : Fast Binary"><span class="none"></span>Serializer : Fast Binary</a>  </li>
    <li><a href="serializer-json.html" title="Serializer : JSON"><span class="none"></span>Serializer : JSON</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Providence Models</h1>
<p>The generated java interface is trying to follow the core java standard as much as possible. There are some exceptions, but these are designed to be non-conflicting with any other possible generated method name, and to separate static and non-static methods without weird naming schemes.</p>
<div class="section">
<h2><a name="Enum_Definitions"></a>Enum Definitions</h2>
<p>Thrift enums are mapped as java enums in <tt>providence</tt>, where each enum value get&#x2019;s a java enum value. E.g.:</p>

<div class="source">
<div class="source"><pre class="prettyprint">enum MyEnum {
    FIRST = 1,
    SECOND,
    THIRD
}
</pre></div></div>
<p>Corresponds to the java enum:</p>

<div class="source">
<div class="source"><pre class="prettyprint">enum MyEnum {
    FIRST(1),
    SECOND(2),
    THIRD(3);

    private final int value;

    public int getId() {
        return value;
    }

    MyEnum(int value) {
        this.value = value;
    }

    @Nullable
    public static MyEnum findById(int id) {}

    @Nonnull
    public static MyEnum valueForId(int id) {}
}
</pre></div></div></div>
<div class="section">
<h2><a name="Message_Definitions"></a>Message Definitions</h2>
<p>There are three types of messages in providence:</p>

<ul>
  
<li><b>[struct]</b>: Simple data structure containing a list of fields  corresponding to a java model class. See struct definitions below  for details.</li>
  
<li><b>[exception]</b>: A struct that also extends the java Exception  class and can be thrown as exception from service methods. Exceptions  have some extra methods to get the original <tt>message</tt> from the  exception <tt>origGetMessage()</tt> and <tt>origGetLocalizedMessage()</tt>, and  an overridden <tt>initCause(Throwable)</tt> method that returns the correct  exception type.</li>
  
<li><b>[union]</b>: A struct that only allows one of it&#x2019;s fields to be  set. Unions have two extra methods for managing the single set  field: <tt>unionField()</tt> and <tt>unionFieldIsSet()</tt>.</li>
</ul>
<p>Example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">struct MyStruct {
    1: i32 my_field;
    2: list&lt;string&gt; other_field;
}
</pre></div></div>
<p>This roughly corresponds to a java POJO class that looks like:</p>

<div class="source">
<div class="source"><pre class="prettyprint">class MyStruct {
    public int myField;
    public List&lt;String&gt; otherField;
}
</pre></div></div>
<p>Except that with providence, you get an immutable object with a builder to help setting it up. So more like:</p>

<div class="source">
<div class="source"><pre class="prettyprint">/**
 * The actual 'struct' class.
 */
class MyStruct {
    private final int myField;
    private final List&lt;String&gt; otherField;

    public MyStruct(int myField, List&lt;String&gt; otherField) {
        this.myField = myField;
        this.otherField = otherField;
    }

    public int getMyField() {
        return myField;
    }

    public List&lt;String&gt; getOtherfield() {
        return otherField;
    }

    /**
     * MyStruct building helper class.
     */
    public static class _Builder {
        private int myField;
        private ArrayList&lt;String&gt; otherField;

        public _Builder setMyField(int value) {
            this.myField = value;
            return this;
        }

        public _Builder setOtherField(List value) {
            this.otherField = value;
            return this;
        }

        public MyStruct build() {
            return new MyStruct(myField, otherField);
        }
    }
}
</pre></div></div></div>
<div class="section">
<h2><a name="Generated_Classes"></a>Generated Classes</h2>
<p>All message types implements the <tt>PMessage</tt> interface, and contains a number of generated methods for accessing content and building new messages. All the objects are generated to be <tt>immutable</tt>, but with use of deeply nested containers that may be broken to some extent. The concept of <tt>simple</tt> messages was introduced to distinguish between structs that completely guarantee immutability, and those that don&#x2019;t.</p>
<div class="section">
<h3><a name="Field_Access"></a>Field Access</h3>
<p>In addition to the methods from <tt>PMessage</tt> interface, a number of accessor methods are generated:</p>

<div class="source">
<div class="source"><pre class="prettyprint">public class MyMessage {
    // Scalar values (all primitive / built-in types plus enums and messages)
    // have a getter and a presence check.

    /**
     * The getter will return the default value if the field is not present.
     * Even required fields that are missing will return a value here for
     * primitive values (except string and binary). The primitive defaults
     * are:
     *
     * bool: false,
     * i8 - i64: 0,
     * double: 0.0
     *
     * Note that boolean fields are prefixed with 'is', not 'get'.
     */
    public int getMyField();

    /**
     * The presence check will behave differently based on the presence
     * requirement to field type match. Required values always return true,
     * because in the built object, they are always present. Optional values
     * will return true if and only of the value was set in the builder.
     * And default values (no requirement indicator) will always be present
     * if it's a primitive value, and behave as optional if non-trivial
     * value (enum and message) unless an explicit default was set.
     */
    public boolean hasMyField();

    // ---- CONTAINERS ----

    /**
     * Containers will also have an extra method for getting number of entries.
     *
     * The entry count returns the number of entries in the container, or 0
     * if the container is not present.
     */
    public int numMyContainer();
}
</pre></div></div>
<p>Note that bool fields use <tt>is</tt> prefix instead of <tt>get</tt>, so the generated getter method is <tt>isMyBool()</tt>. That is <b>not</b> the case in the builder, as a number of <tt>is*</tt> methods are defined for other purposes, and using <tt>get</tt> there avoids generating potential conflicts.</p></div>
<div class="section">
<h3><a name="Unions"></a>Unions</h3>
<p>Unions have a special accessor method called <tt>unionField()</tt>. The <tt>unionField()</tt> method returns the field that was set for the union, or null if there was none. It will return one of the <tt>MyMessage._Field</tt> enum values, so it is possible to make a switch statement like:</p>

<div class="source">
<div class="source"><pre class="prettyprint">switch(union.unionField()) {
    case FIRST:
        // ... Do something.
        break;
    case SECOND:
        // ... Do something else.
        break;
}
</pre></div></div></div>
<div class="section">
<h3><a name="Building_and_Mutating_Messages"></a>Building and Mutating Messages</h3>
<p>Since the generated messages are immutable (they are never proper Java beans), new messages has to be built using the associated <tt>Builder</tt>. The builder can be instantiated in three ways:</p>

<div class="source">
<div class="source"><pre class="prettyprint">// Use these:
MyMessage._Builder builder = MyMessage.builder();
MyMessage._Builder mutator = my_message.mutate();

// This is primarily there to let serializers etc have access to the message
// builders.
MyMessage._Builder builder = MyMessage.kDescriptor.builder();
</pre></div></div>
<p>The <tt>Builder</tt> extends the PMessageBuilder class, and will in addition have a set of methods generated as field setters.</p>

<div class="source">
<div class="source"><pre class="prettyprint">// This is an inner class of MyMessage.
public static class _Builder {
    /**
     * The field setter will set the field value. For non-primitive values,
     * setting it to null will be the same as clearing the field. Native
     * fields will only use the primitive value type, and explicitly set
     * the value.
     */
    public _Builder setMyField(int value);

    /**
     * Clearing the field value back to null or the default value. A cleared
     * field is explicitly not set after the call.
     */
    public _Builder clearMyField();

    // -- primitives --

    /**
     * For convenience, a simple getter for primitive values and enums is
     * provided. Note that it is prefixed 'get' even for boolean fields.
     */
    public String getMyField();

    // -- messages --

    /**
     * Message fields on the other hand can return the message builder for
     * that field. Changes to the given builder will be reflected in the
     * built message.
     */
    public MyMessage._Builder mutableMyField();

    // ---- CONTAINERS ----

    /**
     * Explicitly setting the value and content of the container. This will
     * have as argument the most generic interface available for the desired
     * container (java.util.Collection for list and set, and java.util.Map
     * for map fields). Content is always replaced, and a null value is equal
     * to clearMyContainer().
     *
     * Note that both list and set containers have &lt;code&gt;Collection&amp;lt;T&amp;gt;&lt;/code&gt;
     * as the input type here.
     */
    public _Builder setMyContainer(Collection&lt;Integer&gt; value);

    /**
     * Same as the default version.
     */
    public _Builder clearMyContainer();

    /**
     * For containers the mutable collection instance can be fetched with
     * the mutable* method. It will transform an immutable instance into
     * the appropriate mutable variant if needed.
     */
    public List&lt;String&gt; mutableMyContainer();

    // -- lists and sets --

    /**
     * Add entries to the list or set. Note that when adding by generic
     * collection there is no item type checking. And adding with the
     * (Type... values) will instantiate the container builder and
     * set the field even if there are not values, as if the subsequent
     * method was called with an empty collection.
     */
    public _Builder addToMyContainer(int... values);
    public _Builder addToMyContainer(Collection&lt;Integer&gt; values);

    // -- maps --

    /**
     * Put the key / value pair into the map.
     */
    public _Builder putInMyContainer(int key, int value);
}
</pre></div></div>
<p>When the <tt>Builder</tt> has been updated, you can call <tt>build()</tt> which builds and returns the message regardless. Calling <tt>valid()</tt> will return true if and only if the requirement of every field has been met (required fields must have been set, others are not checked). Note that this makes it possible to build invalid messages.</p>
<p>When setting a field value in a union builder, then that field becomes the current field of the union, thus effectively unsets all other fields. This way the <i>last</i> field set on a union builder, becomes it&#x2019;s value.</p></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-3087264-4', 'auto');
                ga('send', 'pageview');
            </script>
        </div>
        </div>
    </footer>
    </body>
</html>
