<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-01-02 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180102" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Providence &#x2013; Comparison with Apache Thrift</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
                      <a href="https://github.com/morimekta/providence">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Providence</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2018-01-02<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
          <li class="nav-header">Introduction</li>
    <li><a href="index.html" title="Providence"><span class="none"></span>Providence</a>  </li>
    <li><a href="models.html" title="Providence Models"><span class="none"></span>Providence Models</a>  </li>
    <li><a href="services.html" title="Providence Services"><span class="none"></span>Providence Services</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>Comparing with Thrift</a>
  </li>
    <li><a href="https://github.com/morimekta/providence/releases" class="externalLink" title="Downloads & Releases"><span class="none"></span>Downloads & Releases</a>  </li>
          <li class="nav-header">Modules</li>
    <li><a href="providence-core/index.html" title="Core"><span class="none"></span>Core</a>  </li>
    <li><a href="providence-core-client/index.html" title="Core : Client"><span class="none"></span>Core : Client</a>  </li>
    <li><a href="providence-core-server/index.html" title="Core : Server"><span class="none"></span>Core : Server</a>  </li>
    <li><a href="providence-core-jackson/index.html" title="Core : Jackson"><span class="none"></span>Core : Jackson</a>  </li>
    <li><a href="providence-reflect/index.html" title="Utils : Reflect"><span class="none"></span>Utils : Reflect</a>  </li>
    <li><a href="providence-testing/index.html" title="Utils : Testing"><span class="none"></span>Utils : Testing</a>  </li>
    <li><a href="providence-thrift/index.html" title="Utils : Thrift Bridge"><span class="none"></span>Utils : Thrift Bridge</a>  </li>
    <li><a href="providence-storage/index.html" title="Utils : Storage"><span class="none"></span>Utils : Storage</a>  </li>
    <li><a href="providence-config/index.html" title="Utils : Config (beta)"><span class="none"></span>Utils : Config (beta)</a>  </li>
    <li><a href="providence-storage-hazelcast/index.html" title="Utils : Storage - Hazelcast (beta)"><span class="none"></span>Utils : Storage - Hazelcast (beta)</a>  </li>
    <li><a href="providence-jax-rs/index.html" title="Utils : Javax-Ws-Rs (beta)"><span class="none"></span>Utils : Javax-Ws-Rs (beta)</a>  </li>
    <li><a href="providence-generator/index.html" title="Tools : Generator"><span class="none"></span>Tools : Generator</a>  </li>
    <li><a href="providence-generator-java/index.html" title="Tools : Generator - Java"><span class="none"></span>Tools : Generator - Java</a>  </li>
    <li><a href="providence-maven-plugin/index.html" title="Tools : Maven Plugin"><span class="none"></span>Tools : Maven Plugin</a>  </li>
    <li><a href="providence-gradle-plugin.html" title="Tools : Gradle Plugin"><span class="none"></span>Tools : Gradle Plugin</a>  </li>
          <li class="nav-header">CLI Tools</li>
    <li><a href="providence-tools-converter.html" title="CLI : Converter"><span class="none"></span>CLI : Converter</a>  </li>
    <li><a href="providence-tools-rpc.html" title="CLI : RPC Tool"><span class="none"></span>CLI : RPC Tool</a>  </li>
    <li><a href="providence-tools-config.html" title="CLI : Config Helper"><span class="none"></span>CLI : Config Helper</a>  </li>
    <li><a href="providence-tools-generator.html" title="CLI : Generator"><span class="none"></span>CLI : Generator</a>  </li>
          <li class="nav-header">Documentation</li>
    <li><a href="release.html" title="Release Process"><span class="none"></span>Release Process</a>  </li>
    <li><a href="integration-testing.html" title="Integration Testing"><span class="none"></span>Integration Testing</a>  </li>
    <li><a href="serializer-binary.html" title="Serializer : Binary"><span class="none"></span>Serializer : Binary</a>  </li>
    <li><a href="serializer-fast-binary.html" title="Serializer : Fast Binary"><span class="none"></span>Serializer : Fast Binary</a>  </li>
    <li><a href="serializer-json.html" title="Serializer : JSON"><span class="none"></span>Serializer : JSON</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Comparison with Apache Thrift</h1>
<p>If you are familiar with <tt>Apache Thrift</tt>, this is an overview over the main differences in support between the two systems. The differences are mostly minute, but all feature changes are there for a reason. Differences are based on the IDL at <a class="externalLink" href="https://thrift.apache.org/docs/idl">thrift.apache.org</a>.</p>
<p>Some features of apache thrift has simply been <b>removed</b>. This is done in order to simplify both the thrift IDL parsing, and the resulting code generator. Note that this is the differences between what is supported and handled by the <i>described IDL</i>. With some few exceptions, all of the added features are simply ignored by the Apache <tt>thrift</tt> compiler.</p>
<div class="section">
<h2><a name="Annotations"></a>Annotations</h2>
<p>Annotations in apache thrift is simply noted as &#x201c;something internal to facebook&#x201d;, and should not be used. This includes <tt>xsd</tt> and some other keywords. Instead of removing annotations, I <b>explicitly</b> use annotations for various type modifications. Note that annotations can only modify <b>what</b> the code generator generates, but is not included in the type descriptors that are generated.</p>
<p>See details on <a href="annotations.html">annotations</a> for more.</p></div>
<div class="section">
<h2><a name="Namespaces"></a>Namespaces</h2>
<p>Apache Thrift supports a couple of special &#x201c;namespace&#x201d; declarations, e.g. <tt>php_namespace</tt> and <tt>xsi_namespace</tt>. They have been deprecated in thrift, but are entirely removed from providence, so the keywords are not recognized at all.</p></div>
<div class="section">
<h2><a name="Circular_Containment"></a>Circular Containment</h2>
<p>This feature is not explicitly supported or not in thrift, but does not work well in Apache Thrift, meaning that a single struct may contain a field of it&#x2019;s own type, but you may not have two structs each containing the other. This is simply a result of the way Apache Thrift parses the thrift file.</p>
<p>In <tt>providence</tt> you may have circular containment if (and only if) all of the types referring to each other is in the same thrift definition file. E.g.:</p>

<ul>
  
<li>struct A contains struct B contains struct A.</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">namespace java net.morimekta.test.calculator

enum Operator {
    IDENTITY = 1,
    ADD,
    SUBTRACT,
    MULTIPLY,
    DIVIDE
}

union Operand {
    1: Operation operation;
    2: double number;
}

struct Operation {
    1: Operator operator;
    2: list&lt;Operand&gt; operands;
}
</pre></div></div>
<p>This makes model structures like the calculator possible. Since the model objects are immutable and created with builders, it is not possible to create a circular instance containment.</p></div>
<div class="section">
<h2><a name="Naming_Conflicts"></a>Naming Conflicts</h2>
<p>Each code generator needs make getters, setters and mutators using names that are compatible with the language <b>AND</b> compliant to standard styleguides for that language. By using prefixes and name modifications consistently this can be done with some restrictions in order to enable most &#x2018;names&#x2019; to be allowed all over the place.</p>
<p>E.g. the field name &#x2018;public&#x2019; should be allowed for all languages, including java and C++ where it is a reserved word.</p>
<p>Since some languages prefer camelCased names, and other prefer c_cased names, there <b>should</b> be no fields in the same struct with names that will conflict if all &#x2018;_&#x2019; are removed, and the entire name is lower-cased. Even though it is a little more complicated than that.</p>
<p>For this to work in Java, we apply the rules:</p>

<ul>
  
<li>All names are camelCased with a prefix for all methods and fields. E.g.  value fields are prefixed <tt>mValue</tt>, getters with <tt>getValue</tt>, params with  <tt>pValue</tt> etc. No suffixes are used.</li>
  
<li>getters and setters are prefixed with <tt>set</tt>, <tt>addTo</tt>, <tt>get</tt>, <tt>clear</tt>,  <tt>mutable</tt>, <tt>has</tt>, <tt>num</tt> etc.</li>
</ul>
<p>Or in C++ or python. All the names are initially lower c_cased before included in the code.</p>

<ul>
  
<li><b>C++</b>: field names are suffixed with <tt>_</tt>. E.g. <tt>myField</tt> becomes <tt>my_field_</tt>.</li>
  
<li><b>python</b>: field names are prefixed with <tt>__</tt>. E.g. <tt>myField</tt> becomes <tt>__my_field</tt>.</li>
  
<li>getters and setters are prefixed with <tt>set_</tt>, <tt>get_</tt>, <tt>mutable_</tt>, <tt>clear_</tt> <tt>add_to_</tt>, <tt>has_</tt> and <tt>num_</tt>.</li>
  
<li>This breaks the somewhat spread convention that C++ getters should not have any prefix or suffix, but  it makes it possible to use otherwise reserved words as field names.</li>
</ul></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-3087264-4', 'auto');
                ga('send', 'pageview');
            </script>
        </div>
        </div>
    </footer>
    </body>
</html>
