<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-10-24 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20171024" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Providence &#x2013; Integration Testing</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
                      <a href="https://github.com/morimekta/providence">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Providence</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2017-10-24<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.7.1</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
          <li class="nav-header">Introduction</li>
    <li><a href="index.html" title="Providence"><span class="none"></span>Providence</a>  </li>
    <li><a href="models.html" title="Providence Models"><span class="none"></span>Providence Models</a>  </li>
    <li><a href="services.html" title="Providence Services"><span class="none"></span>Providence Services</a>  </li>
    <li><a href="apache-thrift.html" title="Comparing with Thrift"><span class="none"></span>Comparing with Thrift</a>  </li>
    <li><a href="https://github.com/morimekta/providence/releases" class="externalLink" title="Downloads & Releases"><span class="none"></span>Downloads & Releases</a>  </li>
          <li class="nav-header">Modules</li>
    <li><a href="providence-core/index.html" title="Core"><span class="none"></span>Core</a>  </li>
    <li><a href="providence-core-client/index.html" title="Core : Client"><span class="none"></span>Core : Client</a>  </li>
    <li><a href="providence-core-server/index.html" title="Core : Server"><span class="none"></span>Core : Server</a>  </li>
    <li><a href="providence-core-jackson/index.html" title="Core : Jackson"><span class="none"></span>Core : Jackson</a>  </li>
    <li><a href="providence-reflect/index.html" title="Utils : Reflect"><span class="none"></span>Utils : Reflect</a>  </li>
    <li><a href="providence-thrift/index.html" title="Utils : Thrift Bridge"><span class="none"></span>Utils : Thrift Bridge</a>  </li>
    <li><a href="providence-testing/index.html" title="Utils : Testing"><span class="none"></span>Utils : Testing</a>  </li>
    <li><a href="providence-config/index.html" title="Utils : Config"><span class="none"></span>Utils : Config</a>  </li>
    <li><a href="providence-storage/index.html" title="Utils : Storage"><span class="none"></span>Utils : Storage</a>  </li>
    <li><a href="providence-storage-hazelcast/index.html" title="Utils : Storage - Hazelcast"><span class="none"></span>Utils : Storage - Hazelcast</a>  </li>
    <li><a href="providence-jax-rs/index.html" title="Utils : Javax-Ws-Rs"><span class="none"></span>Utils : Javax-Ws-Rs</a>  </li>
    <li><a href="providence-generator/index.html" title="Tools : Generator"><span class="none"></span>Tools : Generator</a>  </li>
    <li><a href="providence-generator-java/index.html" title="Tools : Generator - Java"><span class="none"></span>Tools : Generator - Java</a>  </li>
    <li><a href="providence-generator-json/index.html" title="Tools : Generator - JSON"><span class="none"></span>Tools : Generator - JSON</a>  </li>
    <li><a href="providence-maven-plugin/index.html" title="Tools : Maven Plugin"><span class="none"></span>Tools : Maven Plugin</a>  </li>
    <li><a href="providence-gradle-plugin.html" title="Tools : Gradle Plugin"><span class="none"></span>Tools : Gradle Plugin</a>  </li>
          <li class="nav-header">CLI Tools</li>
    <li><a href="providence-tools-converter.html" title="CLI : Converter"><span class="none"></span>CLI : Converter</a>  </li>
    <li><a href="providence-tools-rpc.html" title="CLI : RPC Tool"><span class="none"></span>CLI : RPC Tool</a>  </li>
    <li><a href="providence-tools-config.html" title="CLI : Config Helper"><span class="none"></span>CLI : Config Helper</a>  </li>
    <li><a href="providence-tools-compiler.html" title="CLI : Compiler"><span class="none"></span>CLI : Compiler</a>  </li>
          <li class="nav-header">Generator Options</li>
    <li><a href="options.html" title="Options Overview"><span class="none"></span>Options Overview</a>  </li>
    <li><a href="options-hazelcast.html" title="Hazelcast Portable"><span class="none"></span>Hazelcast Portable</a>  </li>
    <li><a href="options-android.html" title="Android Parcelable"><span class="none"></span>Android Parcelable</a>  </li>
    <li><a href="options-jackson.html" title="Jackson Annotations"><span class="none"></span>Jackson Annotations</a>  </li>
          <li class="nav-header">Documentation</li>
    <li><a href="release.html" title="Release Process"><span class="none"></span>Release Process</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>Integration Testing</a>
  </li>
    <li><a href="serializer-binary.html" title="Serializer : Binary"><span class="none"></span>Serializer : Binary</a>  </li>
    <li><a href="serializer-fast-binary.html" title="Serializer : Fast Binary"><span class="none"></span>Serializer : Fast Binary</a>  </li>
    <li><a href="serializer-json.html" title="Serializer : JSON"><span class="none"></span>Serializer : JSON</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Integration Testing</h1>
<p>The providence project contains integration tests. The integration tests can be run separately, and is not a dependency for running the main test suites.</p>
<p>There are currently two IT test suites.</p>

<ul>
  
<li><b>[it-serialization]</b>: Thorough testing of serialization focusing on  serialization speed. The thrift compatibility is for the most part  already tested in <tt>providence-thrift</tt>.</li>
  
<li><b>[it-hazelcast]</b>: Proper testing of generated hazelcast generated  code by using actual generated code against a local hazelcast instance  including how thrift IDL updates are handled both forward and backward.</li>
</ul>
<div class="section">
<div class="section">
<h3><a name="Serialization_Speed"></a>Serialization Speed</h3>
<p>To run the serialization integration test suite, after installing the library, run:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn package -Pit-serialization
java -jar it-serialization/target/it-serialization.jar --help
java -jar it-serialization/target/it-serialization.jar
</pre></div></div>
<p>It will take a while, and print quite a lot to std out.</p>
<p>This is a comparative serialization speed test. It is used to see the progress of serialization optimization, and to compare with the native thrift libraries.</p>

<ul>
  
<li>The <tt>pvd</tt> columns are the native providence serialization or in the case of the  <tt>*_protocol</tt> the thrift protocol wrapper performance.</li>
  
<li>The <tt>thr</tt> columns is for the native thrift protocol read / write. The &#x201c;content&#x201d; is  exactly same as the providence version. But compatibility tests are not done here,  but in the <tt>providence-testing</tt> module.</li>
  
<li>The <tt>jck</tt> columns are the jackson serialization that should match the <tt>json_named</tt>  serialization.</li>
</ul>
<p>Latest output from the serialization speed IT, sorted by the SUM of the providence serialization time. Lower is better. There are a number tests, each with a structure focusing on some aspect or style of structures to test. Exceptions are <b>not</b> tested as part of this, as the way the stack traces are handled quickly deteriorates the results for reading providence, though not affecting the others much.</p>

<div class="source">
<div class="source"><pre class="prettyprint">java -jar it-serialization/target/it-serialization.jar --runs 50 --generate 1000
</pre></div></div>
<div class="section">
<h4><a name="Many_containers:"></a>Many containers:</h4>

<div class="source">
<div class="source"><pre class="prettyprint">                              READ                 WRITE                  SUM              SIZE
        name        :   pvd   thr   jck  --  pvd   thr   jck   =   pvd   thr   jck  -- (ratio / size)    
              binary:   0.97  1.00       --  0.85  1.00        =   0.91  1.00       -- ( 1.00 / 5.2 MiB)
         fast_binary:   1.26             --  1.30              =   1.28             -- ( 0.84 / 4.3 MiB)
      tuple_protocol:   1.65  0.97       --  1.62  0.76        =   1.64  0.87       -- ( 0.78 / 4.0 MiB)
     binary_protocol:   1.81             --  1.94              =   1.87             -- ( 1.00 / 5.2 MiB)
    compact_protocol:   2.04  1.21       --  1.81  0.91        =   1.93  1.06       -- ( 0.83 / 4.3 MiB)
                json:   5.21             --  5.35              =   5.28             -- ( 1.30 / 6.7 MiB)
          json_named:   6.08        9.51 --  5.74        1.66  =   5.91        5.59 -- ( 1.69 / 8.8 MiB)
         json_pretty:   8.08             --  7.72              =   7.90             -- ( 2.62 / 13.6 MiB)
              pretty:   9.21             --  6.45              =   7.83             -- ( 1.66 / 8.6 MiB)
              config:   9.79             --  7.30              =   8.54             -- ( 2.16 / 11.2 MiB)
</pre></div></div></div>
<div class="section">
<h4><a name="Many_Optional_Fields:"></a>Many Optional Fields:</h4>

<div class="source">
<div class="source"><pre class="prettyprint">                              READ                 WRITE                  SUM              SIZE
        name        :   pvd   thr   jck  --  pvd   thr   jck   =   pvd   thr   jck  -- (ratio / size)    
              binary:   0.94  1.00       --  0.91  1.00        =   0.93  1.00       -- ( 1.00 / 2.5 MiB)
         fast_binary:   1.24             --  1.50              =   1.37             -- ( 0.89 / 2.2 MiB)
      tuple_protocol:   1.64  1.04       --  1.63  0.84        =   1.63  0.94       -- ( 0.83 / 2.0 MiB)
     binary_protocol:   1.71             --  1.92              =   1.81             -- ( 1.00 / 2.5 MiB)
    compact_protocol:   1.97  1.30       --  1.82  0.92        =   1.89  1.11       -- ( 0.87 / 2.1 MiB)
                json:   5.30             --  5.95              =   5.62             -- ( 1.27 / 3.1 MiB)
          json_named:   6.01        8.91 --  6.12        1.56  =   6.06        5.24 -- ( 1.53 / 3.8 MiB)
         json_pretty:   7.23             --  7.50              =   7.37             -- ( 2.02 / 5.0 MiB)
              pretty:   8.91             --  6.87              =   7.89             -- ( 1.48 / 3.6 MiB)
              config:   9.37             --  7.45              =   8.41             -- ( 1.77 / 4.4 MiB)
</pre></div></div></div>
<div class="section">
<h4><a name="Many_Required_Fields:"></a>Many Required Fields:</h4>

<div class="source">
<div class="source"><pre class="prettyprint">                              READ                 WRITE                  SUM              SIZE
        name        :   pvd   thr   jck  --  pvd   thr   jck   =   pvd   thr   jck  -- (ratio / size)    
              binary:   0.89  1.00       --  0.94  1.00        =   0.92  1.00       -- ( 1.00 / 2.5 MiB)
         fast_binary:   1.18             --  1.59              =   1.39             -- ( 0.89 / 2.2 MiB)
      tuple_protocol:   1.47  0.96       --  1.64  0.74        =   1.55  0.85       -- ( 0.83 / 2.0 MiB)
     binary_protocol:   1.61             --  2.02              =   1.82             -- ( 1.00 / 2.5 MiB)
    compact_protocol:   1.86  1.27       --  1.90  0.97        =   1.88  1.12       -- ( 0.87 / 2.1 MiB)
                json:   5.01             --  6.25              =   5.63             -- ( 1.27 / 3.1 MiB)
          json_named:   5.79        8.46 --  6.60        1.67  =   6.19        5.07 -- ( 1.53 / 3.8 MiB)
         json_pretty:   6.87             --  8.09              =   7.48             -- ( 2.02 / 5.0 MiB)
              pretty:   8.61             --  7.31              =   7.96             -- ( 1.48 / 3.6 MiB)
              config:   8.94             --  7.89              =   8.42             -- ( 1.78 / 4.4 MiB)
</pre></div></div></div>
<div class="section">
<h4><a name="Deep_Structure:"></a>Deep Structure:</h4>

<div class="source">
<div class="source"><pre class="prettyprint">                              READ                 WRITE                  SUM              SIZE
        name        :   pvd   thr   jck  --  pvd   thr   jck   =   pvd   thr   jck  -- (ratio / size)    
              binary:   0.86  1.00       --  0.73  1.00        =   0.79  1.00       -- ( 1.00 / 7.3 MiB)
         fast_binary:   1.34             --  1.65              =   1.50             -- ( 0.82 / 6.0 MiB)
      tuple_protocol:   1.96  0.89       --  2.11  0.65        =   2.04  0.77       -- ( 0.75 / 5.5 MiB)
    compact_protocol:   2.47  1.23       --  2.40  0.86        =   2.43  1.04       -- ( 0.81 / 6.0 MiB)
     binary_protocol:   2.31             --  2.73              =   2.52             -- ( 1.00 / 7.3 MiB)
                json:   5.14             --  5.83              =   5.49             -- ( 1.22 / 9.0 MiB)
          json_named:   6.22        9.55 --  6.44        1.55  =   6.33        5.55 -- ( 1.74 / 12.8 MiB)
              pretty:  10.85             --  6.94              =   8.89             -- ( 1.71 / 12.6 MiB)
         json_pretty:   9.62             -- 10.09              =   9.85             -- ( 3.41 / 25.0 MiB)
              config:  11.91             --  8.56              =  10.23             -- ( 2.65 / 19.4 MiB)
</pre></div></div>
<p><b>NOTE:</b> The thrift JSON protocol was removed because some weird bug keeps messing up deserialization and stopping the test. I will put it back once the bug is fixed or can be bypassed.</p>
<p><b>NOTE:</b> Since the test is for the <i>speed</i> of the serialization, we are only interested in the comparison between the serializers, not the absolute values. All numbers have been normalised to be relative to the native thrift binary protocol implementation (that&#x2019;s why it&#x2019;s 1.00 for thrift binary).</p></div></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-3087264-4', 'auto');
                ga('send', 'pageview');
            </script>
        </div>
        </div>
    </footer>
    </body>
</html>
